description: Attach an existing security group to multiple EC2 instances
schemaVersion: '0.3'
mainSteps:
  - name: AttachSecurityGroup
    action: 'aws:runShellScript'
    inputs:
      runCommand:
        - 'aws ec2 modify-instance-attribute --instance-id i-1234567890abcdef0 --groups {{SecurityGroupId}}'
    parameters:
      - name: SecurityGroupId
        type: String
        description: The ID of the security group to attach
        default: sg-0123456789abcdef0
      - name: AutomationAssumeRole
        type: String
        description: '(Optional) The ARN of the role that allows Automation to perform the actions on your behalf. If no role is specified, Systems Manager Automation uses your IAM permissions to execute this document.'
        default: ''
