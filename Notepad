description: Attach an existing security group to multiple EC2 instances
schemaVersion: '0.3'
assumeRole: 'arn:aws:iam::{{global:ACCOUNT_ID}}:role/sea-pfg-ssm-custom-role'
parameters:
  SecurityGroupId:
    type: 'String'
    description: The ID of the security group to attach.
  InstanceIds:
    type: 'StringList'
    description: Comma-separated list of instance IDs to attach the security group to.
mainSteps:
  - name: AttachSecurityGroup
    action: 'aws:executeAwsApi'
    inputs:
      Service: ec2
      Api: ModifyInstanceAttribute
      InstanceId: '{{InstanceIds}}'
      Groups: '{{SecurityGroupId}}'
