description: Attach an existing security group to multiple EC2 instances
schemaVersion: '2.2'
assumeRole: 'arn:aws:iam::{{global:ACCOUNT_ID}}:role/sea-pfg-ssm-custom-role'
mainSteps:
  - action: 'aws:runShellScript'
    name: 'attachSecurityGroup'
    inputs:
      runCommand:
        - 'aws ec2 modify-instance-attribute --instance-id i-1234567890abcdef0 --groups {{SecurityGroupId}}'
    parameters:
      - name: SecurityGroupId
        type: String
        description: The ID of the security group to attach
        default: sg-0123456789abcdef0
