{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "AWS CloudFormation Template to create an SNS topic with a restricted resource policy",
    "Parameters": {
        "SnsTopicName": {
            "Type": "String",
            "Description": "SNS Topic Name",
            "Default": "demo-sns-topic"
        },
        "AccountNumber": {
            "Type": "String",
            "Description": "AWS Account Number"
        }
    },
    "Resources": {
        "DemoSnsTopic": {
            "Type": "AWS::SNS::Topic",
            "Properties": {
                "DisplayName": {
                    "Ref": "SnsTopicName"
                }
            }
        },
        "DemoSnsTopicPolicy": {
            "Type": "AWS::SNS::TopicPolicy",
            "Properties": {
                "PolicyDocument": {
                    "Id": "MyDemoSnsTopicPolicy",
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Sid": "RestrictAccess",
                            "Effect": "Allow",
                            "Principal": {
                                "AWS": {
                                    "Fn::Sub": "arn:aws:iam::${AccountNumber}:root"
                                }
                            },
                            "Action": "SNS:Publish",
                            "Resource": {
                                "Ref": "DemoSnsTopic"
                            }
                        }
                    ]
                },
                "Topics": [
                    {
                        "Ref": "DemoSnsTopic"
                    }
                ]
            }
        }
    }
}


In this template:

The SnsTopicName parameter allows you to specify the name of the SNS topic.
The AccountNumber parameter is where you provide the AWS account number. The Fn::Sub function is used to substitute the account number into the ARN.
The DemoSnsTopic resource defines the SNS topic.
The DemoSnsTopicPolicy resource defines the resource policy for the SNS topic, allowing only the root user of the specified account to publish messages to the topic.
